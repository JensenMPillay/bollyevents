{% extends 'baseAdmin.html.twig' %}

{% block body %}
	<div class="row p-2 p-sm-5">
		<div class="col-md-12">
			<div class="card text-bg-info">
				<div class="card-header">
					<h4 class="card-title text-primary">Users Management</h4>
				</div>
				{# Modal #}
				<!-- Modal -->
				<div class="modal fade" id="userModal" tabindex="-1" aria-labelledby="userModalLabel" aria-hidden="true">
					<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="userModalLabel">User</h5>
								<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
							</div>
							<div class="modal-body"></div>
						</div>
					</div>
				</div>
				<div class="card-body">
					<div class="table-responsive">
						<table class="table text-light">
							<thead class="text-primary text-uppercase">
								<tr>
									<th>ID</th>
									<th>Lastname</th>
									<th>Firstname</th>
									<th>Email</th>
									<th>Roles</th>
									<th>Address</th>
									<th>City</th>
									<th>Postal Code</th>
									<th>Created At</th>
									<th>Updated At</th>
									<th>Is Verified</th>
									<th class="text-center">Actions</th>
								</tr>
							</thead>
							<tbody>
								{% for user in users %}
									<tr>
										<td>{{ user.id }}</td>
										<td>{{ user.lastname }}</td>
										<td>{{ user.firstname }}</td>
										<td>{{ user.email }}</td>
										<td>{{ user.roles|join(', ') }}</td>
										<td>{{ user.address }}</td>
										<td>{{ user.city }}</td>
										<td>{{ user.postalcode }}</td>
										<td>{{ user.createdAt|date('Y-m-d H:i:s') }}</td>
										<td>
											{% if user.updatedAt %}
												{{ user.updatedAt|date('Y-m-d H:i:s') }}
											{% endif %}
										</td>
										<td>{{ user.isVerified ? 'Yes' : 'No' }}</td>
										<td>
											<div class="btn-group" role="group">
												<a href="{{ path('app_admin_user_edit', {'id': user.id}) }}" class="btn btn-sm btn-warning m-1" data-toggle="modal" data-target="#userModal">
													Edit
												</a>
												<a href="{{ path('app_admin_user_delete', {'id': user.id}) }}" class="btn btn-sm btn-danger m-1" onclick="return confirm('Are you sure?')">
													Delete
												</a>
											</div>
										</td>
									</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
				</div>
				<div class="card-footer text-center">
					<a id="createBtnModal" href="{{ path('app_admin_user_create') }}" class="btn btn-primary" data-toggle="modal" data-target="#userModal">
						Create
					</a>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
